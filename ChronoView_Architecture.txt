1. High-Level Layout

Frontend: React SPA hosted on S3 + CloudFront (HTTPS via ACM, domain in Route 53)

Backend: EC2 (Node.js + Express) behind an Application Load Balancer

Database: RDS (PostgreSQL)

Auth: Custom JWT service (future Cognito option)

Realtime: WebSocket server on EC2 (optional later)

Monitoring: CloudWatch logs / alarms

Flow:
User → CloudFront → S3 (SPA)
  ↘ ALB → EC2 (API) → RDS
    ↘ CloudWatch

2. AWS Components (Simplified)
Component	Purpose
S3 + CloudFront	Hosts & caches the React build
ALB + EC2	Runs Express API (PM2 + Nginx)
RDS (Postgres)	Stores users / app data
IAM + SSM / Secrets Manager	Manage creds & env vars
CloudWatch	Logs / metrics / alarms
3. Database (Current)

users (id UUID PK, email UNIQUE, password_hash, display_name, created_at timestamp)
Future tables: watchlists, charts, alerts, candles

4. Backend API (Current & Next)

Now:

POST /api/users → add new user (works)

Next:

POST /api/login → verify credentials, issue JWT

GET / api/me → fetch user profile
Later: CRUD for charts, watchlists, alerts

5. Auth Strategy

Start with custom login + JWT (bcrypt-hashed passwords).
Optionally migrate to Cognito once production-ready.

6. Security / Networking

VPC: public (ALB), private (EC2 + RDS)

SG rules:

ALB → EC2 (80/443)

EC2 → RDS (5432)

ACM certs on CloudFront / ALB

WAF on CloudFront

7. DevOps / CI-CD

Frontend: build → S3 → CloudFront invalidate

Backend: build/test → deploy to EC2 (via GitHub Actions or CodeDeploy)

Env vars: from SSM or Secrets Manager

Logs: CloudWatch (7–30 day retention)

8. Costs (Low-traffic Estimate)

EC2 t3.small ≈ $15–20 / mo

RDS db.t3.micro ≈ $10–15 / mo

S3 + CloudFront + Route 53 ≈ $3–6 / mo
Total: ~$30–45 / month

9. Deployment Order

Domain + ACM certs

S3 + CloudFront (frontend)

VPC + subnets

RDS (Postgres DB + users table)

EC2 + ALB (backend API)

Auth (JWT or Cognito)

CloudWatch monitoring

CI/CD pipelines

10. Repo Layout
ChronoView/
├── frontend/   # React SPA (build → S3)
├── backend/    # Node/Express API + db.js + server.js
└── infra/      # IaC (VPC, ALB, EC2, RDS, CF, S3)