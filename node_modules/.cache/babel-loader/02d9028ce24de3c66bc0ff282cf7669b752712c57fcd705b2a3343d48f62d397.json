{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jasin\\\\OneDrive\\\\Desktop\\\\ChronoView - Copy\\\\src\\\\components\\\\ChartWindow\\\\ChartWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { createChart } from \"lightweight-charts\";\nimport \"./ChartWindow.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChartWindow = () => {\n  _s();\n  const chartContainerRef = useRef();\n  const chartRef = useRef(null);\n  const [symbol, setSymbol] = useState(\"SPX\");\n  const [interval, setInterval] = useState(\"1d\");\n  const [range, setRange] = useState(\"6mo\");\n\n  // Create chart only once\n  useEffect(() => {\n    const chart = createChart(chartContainerRef.current, {\n      width: chartContainerRef.current.clientWidth,\n      height: 600,\n      layout: {\n        background: {\n          color: \"#1f1f1f\"\n        },\n        textColor: \"#fbf2f2\"\n      },\n      grid: {\n        vertLines: {\n          color: \"#2a2a2a\"\n        },\n        horzLines: {\n          color: \"#2a2a2a\"\n        }\n      },\n      crosshair: {\n        mode: 1\n      },\n      rightPriceScale: {\n        borderVisible: false\n      },\n      timeScale: {\n        borderVisible: false\n      }\n    });\n    const candleSeries = chart.addCandlestickSeries({\n      upColor: \"#0ce475\",\n      borderUpColor: \"#0ce475\",\n      wickUpColor: \"#0ce475\",\n      downColor: \"#f7052d\",\n      borderDownColor: \"#f7052d\",\n      wickDownColor: \"#f7052d\"\n    });\n    chartRef.current = {\n      chart,\n      candleSeries\n    };\n    const handleResize = () => {\n      chart.applyOptions({\n        width: chartContainerRef.current.clientWidth\n      });\n    };\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n      chart.remove();\n      chartRef.current = null;\n    };\n  }, []);\n\n  // Fetch data when symbol, interval, or range changes\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await fetch(`http://127.0.0.1:8000/api/history?symbol=${symbol}&interval=${interval}&range=${range}`);\n        const data = await res.json();\n        if (chartRef.current && data && Array.isArray(data)) {\n          chartRef.current.candleSeries.setData(data);\n        }\n      } catch (err) {\n        console.error(\"Chart fetch error:\", err);\n      }\n    };\n    fetchData();\n  }, [symbol, interval, range]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-toolbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"symbol-input\",\n        value: symbol,\n        onChange: e => setSymbol(e.target.value.toUpperCase()),\n        placeholder: \"Symbol (e.g. AAPL, SPX, BTC-USD)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"chart-select\",\n        onChange: e => setInterval(e.target.value),\n        value: interval,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1m\",\n          children: \"1m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"5m\",\n          children: \"5m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1h\",\n          children: \"1h\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1d\",\n          children: \"1d\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1wk\",\n          children: \"1wk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"chart-select\",\n        onChange: e => setRange(e.target.value),\n        value: range,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1mo\",\n          children: \"1M\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"3mo\",\n          children: \"3M\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"6mo\",\n          children: \"6M\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1y\",\n          children: \"1Y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"5y\",\n          children: \"5Y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"max\",\n          children: \"Max\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chartContainerRef,\n      className: \"chart-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(ChartWindow, \"AcYEEF7gCmU3iJZunvrUeyckzsg=\");\n_c = ChartWindow;\nexport default ChartWindow;\nvar _c;\n$RefreshReg$(_c, \"ChartWindow\");","map":{"version":3,"names":["React","useEffect","useRef","useState","createChart","jsxDEV","_jsxDEV","ChartWindow","_s","chartContainerRef","chartRef","symbol","setSymbol","interval","setInterval","range","setRange","chart","current","width","clientWidth","height","layout","background","color","textColor","grid","vertLines","horzLines","crosshair","mode","rightPriceScale","borderVisible","timeScale","candleSeries","addCandlestickSeries","upColor","borderUpColor","wickUpColor","downColor","borderDownColor","wickDownColor","handleResize","applyOptions","window","addEventListener","removeEventListener","remove","fetchData","res","fetch","data","json","Array","isArray","setData","err","console","error","className","children","value","onChange","e","target","toUpperCase","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","$RefreshReg$"],"sources":["C:/Users/jasin/OneDrive/Desktop/ChronoView - Copy/src/components/ChartWindow/ChartWindow.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { createChart } from \"lightweight-charts\";\r\nimport \"./ChartWindow.css\";\r\n\r\nconst ChartWindow = () => {\r\n  const chartContainerRef = useRef();\r\n  const chartRef = useRef(null);\r\n  const [symbol, setSymbol] = useState(\"SPX\");\r\n  const [interval, setInterval] = useState(\"1d\");\r\n  const [range, setRange] = useState(\"6mo\");\r\n\r\n  // Create chart only once\r\n  useEffect(() => {\r\n    const chart = createChart(chartContainerRef.current, {\r\n      width: chartContainerRef.current.clientWidth,\r\n      height: 600,\r\n      layout: {\r\n        background: { color: \"#1f1f1f\" },\r\n        textColor: \"#fbf2f2\",\r\n      },\r\n      grid: {\r\n        vertLines: { color: \"#2a2a2a\" },\r\n        horzLines: { color: \"#2a2a2a\" },\r\n      },\r\n      crosshair: { mode: 1 },\r\n      rightPriceScale: { borderVisible: false },\r\n      timeScale: { borderVisible: false },\r\n    });\r\n\r\n    const candleSeries = chart.addCandlestickSeries({\r\n      upColor: \"#0ce475\",\r\n      borderUpColor: \"#0ce475\",\r\n      wickUpColor: \"#0ce475\",\r\n      downColor: \"#f7052d\",\r\n      borderDownColor: \"#f7052d\",\r\n      wickDownColor: \"#f7052d\",\r\n    });\r\n\r\n    chartRef.current = { chart, candleSeries };\r\n\r\n    const handleResize = () => {\r\n      chart.applyOptions({ width: chartContainerRef.current.clientWidth });\r\n    };\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n      chart.remove();\r\n      chartRef.current = null;\r\n    };\r\n  }, []);\r\n\r\n  // Fetch data when symbol, interval, or range changes\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await fetch(\r\n          `http://127.0.0.1:8000/api/history?symbol=${symbol}&interval=${interval}&range=${range}`\r\n        );\r\n        const data = await res.json();\r\n        if (chartRef.current && data && Array.isArray(data)) {\r\n          chartRef.current.candleSeries.setData(data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Chart fetch error:\", err);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [symbol, interval, range]);\r\n\r\n  return (\r\n    <div className=\"chart-wrapper\">\r\n      <div className=\"chart-toolbar\">\r\n        <input\r\n          className=\"symbol-input\"\r\n          value={symbol}\r\n          onChange={(e) => setSymbol(e.target.value.toUpperCase())}\r\n          placeholder=\"Symbol (e.g. AAPL, SPX, BTC-USD)\"\r\n        />\r\n        <select\r\n          className=\"chart-select\"\r\n          onChange={(e) => setInterval(e.target.value)}\r\n          value={interval}\r\n        >\r\n          <option value=\"1m\">1m</option>\r\n          <option value=\"5m\">5m</option>\r\n          <option value=\"1h\">1h</option>\r\n          <option value=\"1d\">1d</option>\r\n          <option value=\"1wk\">1wk</option>\r\n        </select>\r\n        <select\r\n          className=\"chart-select\"\r\n          onChange={(e) => setRange(e.target.value)}\r\n          value={range}\r\n        >\r\n          <option value=\"1mo\">1M</option>\r\n          <option value=\"3mo\">3M</option>\r\n          <option value=\"6mo\">6M</option>\r\n          <option value=\"1y\">1Y</option>\r\n          <option value=\"5y\">5Y</option>\r\n          <option value=\"max\">Max</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div ref={chartContainerRef} className=\"chart-container\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChartWindow;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}